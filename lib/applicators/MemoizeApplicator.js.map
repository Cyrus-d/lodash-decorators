{"version":3,"file":"MemoizeApplicator.js","sourceRoot":"","sources":["../../src/applicators/MemoizeApplicator.ts"],"names":[],"mappings":";;;AAAA,uCAAiD;AAEjD,2CAA4D;AAC5D,kCAA2C;AAE3C;IAAuC,6CAAU;IAAjD;;IA2BA,CAAC;IA1BC,iCAAK,GAAL,UAAM,EAAwE;YAAtE,gBAAK,EAAE,sBAAQ,EAAY,2BAAO,EAAI,cAAI,EAAE,kBAAM;QACxD,IAAI,QAAQ,GAAG,uBAAe,CAC5B,sBAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAC9E,QAAQ,EACR,MAAM,EACN,KAAK,CACN,CAAC;QAEF,IAAI,QAAQ,IAAI,QAAQ,EAAE;YACxB,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACpC;QAED,IAAM,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEtE,IAAI,oBAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;YACf,IAAA,YAAyB,EAAvB,gBAAK,EAAE,cAAI,CAAa;YAEhC,IAAI,KAAK,EAAE;gBACT,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;aACxB;iBAAM,IAAI,sBAAU,CAAC,IAAI,CAAC,EAAE;gBAC3B,QAAQ,CAAC,KAAK,GAAG,IAAK,IAAY,EAAE,CAAC;aACtC;SACF;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IACH,wBAAC;AAAD,CAAC,AA3BD,CAAuC,uBAAU,GA2BhD;AA3BY,8CAAiB","sourcesContent":["import { isFunction, isObject } from 'lodash-es';\r\n\r\nimport { Applicator, ApplicateOptions } from './Applicator';\r\nimport { resolveFunction } from '../utils';\r\n\r\nexport class MemoizeApplicator extends Applicator {\r\n  apply({ value, instance, config: { execute }, args, target }: ApplicateOptions): any {\r\n    let resolver = resolveFunction(\r\n      isFunction(args[0]) ? args[0] : isObject(args[0]) ? args[0].resolver : args[0],\r\n      instance,\r\n      target,\r\n      false\r\n    );\r\n\r\n    if (resolver && instance) {\r\n      resolver = resolver.bind(instance);\r\n    }\r\n\r\n    const memoized = resolver ? execute(value, resolver) : execute(value);\r\n\r\n    if (isObject(args[0])) {\r\n      const { cache, type } = args[0];\r\n\r\n      if (cache) {\r\n        memoized.cache = cache;\r\n      } else if (isFunction(type)) {\r\n        memoized.cache = new (type as any)();\r\n      }\r\n    }\r\n\r\n    return memoized;\r\n  }\r\n}\r\n"]}